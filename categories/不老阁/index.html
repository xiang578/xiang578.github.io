<!doctype html>
<html lang="zh"><head><!-- hexo injector head_begin start --><link rel="stylesheet" href="https://cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/lxgwwenkaiscreen.css"><script async src="https://umami.xiang578.com/script.js" data-website-id="0bf958fd-ca98-4a54-b1c0-bf3384802fcc"></script><script data-goatcounter="https://xiang578.goatcounter.com/count" async src="/count.js"></script><link rel="webmention" href="https://webmention.io/blog.xiang578.com/webmention" /> <link rel="pingback" href="https://webmention.io/blog.xiang578.com/xmlrpc" /><link title="Follow me on Twitter" rel="me" href="https://twitter.com/xiang578"/><!-- hexo injector head_begin end --><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>分类: 不老阁 - 算法花园</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="算法花园"><meta name="msapplication-TileImage" content="/img/logo.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="算法花园"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="算法花园"><meta property="og:url" content="https://blog.xiang578.com/"><meta property="og:site_name" content="算法花园"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blog.xiang578.com/img/og_image.png"><meta property="article:author" content="Ryen Xiang"><meta property="article:tag" content="机器学习"><meta property="article:tag" content="深度学习"><meta property="article:tag" content="阅读"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://blog.xiang578.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.xiang578.com"},"headline":"算法花园","image":["https://blog.xiang578.com/img/og_image.png"],"author":{"@type":"Person","name":"Ryen Xiang"},"publisher":{"@type":"Organization","name":"算法花园","logo":{"@type":"ImageObject","url":"https://blog.xiang578.com/img/logo.svg"}},"description":null}</script><link rel="alternate" href="/atom.xml" title="算法花园" type="application/atom+xml"><link rel="icon" href="/img/logo.svg"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/font-awesome/6.0.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?a4147d4821ff8f39796b456847e5ce38";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="算法花园" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about.html">关于</a><a class="navbar-item" href="/link">链接</a><a class="navbar-item" href="/tech">技术</a><a class="navbar-item" target="_blank" rel="noopener" href="https://xiang578.goatcounter.com/">统计</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/xiang578"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container h-entry"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">分类</a></li><li class="is-active"><a href="#" aria-current="page">不老阁</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2019-11-03T10:03:23.000Z" title="2019-11-03T10:03:23.000Z">2019-11-03</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2024-04-19T13:37:15.941Z" title="2024-04-19T13:37:15.941Z">2024-04-19</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E4%B8%8D%E8%80%81%E9%98%81/">不老阁</a></span><span class="level-item"><i class="far fa-clock"></i> 4 分钟读完 (大约580个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/post/blog-writing-checklist.html">算法花园写作风格清单</a></p><div class="content  e-content"><blockquote>
<p>李如一在 <a target="_blank" rel="noopener" href="https://www.qdaily.com/articles/1397.html">写作风格手册</a> 中提到写作风格的作用是 「保持机构和组织内部的文体统一，提高沟通效率。」</p>
<p>本清单会持续更新，如果有相关的建议，可以在留言中告诉我。</p>
</blockquote>
<p>算法花园定位为个人博客，也是我和这个世界沟通的窗口。为提高读者阅读体验，参考相关文章后，推出该清单统一网站文章的基础风格。</p>
<h2 id="写作"><a class="markdownIt-Anchor" href="#写作"></a> 写作</h2>
<ol>
<li>减少形容词使用，尽可能删除 「的」和「了」。</li>
<li>给出引用图片及引文来源。</li>
<li>文章如果发布后大幅度修改，在末尾给出版本信息。</li>
<li>写完文章后，整体阅读一遍。</li>
</ol>
<h2 id="排版"><a class="markdownIt-Anchor" href="#排版"></a> 排版</h2>
<ol>
<li>中文、英文、数字中间加空格，数字与单位之间无需增加空格，全角标点与其他字符之间不加空格。链接前后增加空格用以区分。</li>
<li>不重复使用标点符号。</li>
<li>中文使用直角引号 「」以及『 』。</li>
<li>使用全角中文标点，数字使用半角字符。中文中出现英文部分，仍然使用中文标点。</li>
<li>遇到完整的英文整句、特殊名词，其內容使用半角标点。</li>
<li>专有名词使用正确的大小写，使用公认的缩写。</li>
<li>todo 如何处理图片排版和命名。</li>
<li>使用英文命名文档，使用 <code>-</code> 来连接。为保证搜索引擎效果，尽量不要修改文档名称。</li>
<li><s>每篇文章开头添加简单介绍 <code>&lt;!--more--&gt;</code>。</s></li>
<li>发布后，在网页中确认格式是否符合预期、链接能否点击以及图片能否展示。</li>
</ol>
<h2 id="changelog"><a class="markdownIt-Anchor" href="#changelog"></a> ChangeLog</h2>
<blockquote>
<p>20191103: 第一版</p>
</blockquote>
<h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.qdaily.com/articles/1397.html">写作风格手册_设计词典_好奇心日报</a></li>
<li><a target="_blank" rel="noopener" href="https://mazhuang.org/wiki/chinese-copywriting-guidelines/">中文文案排版指北（简体中文版） — 码志</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/49729668">简体中文文本排版指南 - 知乎</a></li>
<li><a target="_blank" rel="noopener" href="https://sspai.com/post/37815">少数派写作排版指南 - 少数派</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8ffc3e0d11e2">城堡制作检查清单 0.1 版 - 简书</a></li>
</ul>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted p-category" rel="tag" href="/tags/blog/">blog, </a><a class="link-muted p-category" rel="tag" href="/tags/writing/">writing </a></div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2019-05-25T13:21:14.000Z" title="2019-05-25T13:21:14.000Z">2019-05-25</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2024-04-19T13:37:15.941Z" title="2024-04-19T13:37:15.941Z">2024-04-19</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E4%B8%8D%E8%80%81%E9%98%81/">不老阁</a></span><span class="level-item"><i class="far fa-clock"></i> 5 分钟读完 (大约770个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/post/meet-leancloud-counter-security-problem.html">博客折腾记：hexo-leancloud-counter-security 与标题中的引号冲突</a></p><div class="content  e-content"><p>昨天按照 <a target="_blank" rel="noopener" href="https://github.com/theme-next/hexo-theme-next/blob/master/docs/LEANCLOUD-COUNTER-SECURITY.md">hexo-theme-next/LEANCLOUD-COUNTER-SECURITY.md at master · theme-next/hexo-theme-next</a> 这个文档配置博客阅读次数时，遇到 <code>hexo-leancloud-counter-security</code> 插件的一个冲突。</p>
<p>完成配置使用 <code>hexo -d</code> 时，终端中出现下面的错误提示：</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> ATAL Something&#x27;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br><span class="line">SyntaxError: Unexpected token h in JSON at position 30</span><br><span class="line">    at JSON.parse (&lt;anonymous&gt;)</span><br><span class="line">    at /Users/didi/Documents/personal/xiang578.github.io/node_modules/hexo-leancloud-counter-security/index.js:92:42</span><br><span class="line">    at arrayEach (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_lodash@4.17.11@lodash/lodash.js:516:11)</span><br><span class="line">    at Function.forEach (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_lodash@4.17.11@lodash/lodash.js:9344:14)</span><br><span class="line">    at Hexo._callee$ (/Users/didi/Documents/personal/xiang578.github.io/node_modules/hexo-leancloud-counter-security/index.js:83:27)</span><br><span class="line">    at tryCatch (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_regenerator-runtime@0.11.1@regenerator-runtime/runtime.js:62:40)</span><br><span class="line">    at Generator.invoke [as _invoke] (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_regenerator-runtime@0.11.1@regenerator-runtime/runtime.js:296:22)</span><br><span class="line">    at Generator.prototype.(anonymous function) [as next] (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_regenerator-runtime@0.11.1@regenerator-runtime/runtime.js:114:21)</span><br><span class="line">    at step (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/asyncToGenerator.js:17:30)</span><br><span class="line">    at /Users/didi/Documents/personal/xiang578.github.io/node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/asyncToGenerator.js:28:13</span><br><span class="line">    at process._tickCallback (internal/process/next_tick.js:68:7)</span><br></pre></td></tr></table></figure>
<p>看提示貌似是利用 Json 解析字符串的时候出现问题。打开  <code>node_modules/hexo-leancloud-counter-security/index.js:92</code>，对应出现一个解析 JSON的：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">y = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(memoData[memoIdx].<span class="title function_">substring</span>(<span class="number">0</span>, memoData[memoIdx].<span class="property">length</span> - <span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<p>js 没有怎么接触过，不知道能不能单步调试之类的，只好祭出输出调试大法，加上两个输出：</p>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(memoIdx)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(memoData[memoIdx])</span><br><span class="line">y = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(memoData[memoIdx].<span class="title function_">substring</span>(<span class="number">0</span>,memoData[memoIdx].<span class="property">length</span> - <span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<p>然后再执行 <code>hexo -d</code> 命令，命令行输出为：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">28</span><br><span class="line">&#123;&quot;title&quot;:&quot;System.out.println(&quot;hello world!&quot;);&quot;,&quot;url&quot;:&quot;/post/hello-world.html&quot;&#125;,</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br><span class="line">SyntaxError: Unexpected token h in JSON at position 30</span><br><span class="line">    at JSON.parse (&lt;anonymous&gt;)</span><br><span class="line">    at /Users/didi/Documents/personal/xiang578.github.io/node_modules/hexo-leancloud-counter-security/index.js:92:42</span><br><span class="line">    at arrayEach (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_lodash@4.17.11@lodash/lodash.js:516:11)</span><br><span class="line">    at Function.forEach (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_lodash@4.17.11@lodash/lodash.js:9344:14)</span><br><span class="line">    at Hexo._callee$ (/Users/didi/Documents/personal/xiang578.github.io/node_modules/hexo-leancloud-counter-security/index.js:83:27)</span><br><span class="line">    at tryCatch (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_regenerator-runtime@0.11.1@regenerator-runtime/runtime.js:62:40)</span><br><span class="line">    at Generator.invoke [as _invoke] (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_regenerator-runtime@0.11.1@regenerator-runtime/runtime.js:296:22)</span><br><span class="line">    at Generator.prototype.(anonymous function) [as next] (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_regenerator-runtime@0.11.1@regenerator-runtime/runtime.js:114:21)</span><br><span class="line">    at step (/Users/didi/Documents/personal/xiang578.github.io/node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/asyncToGenerator.js:17:30)</span><br><span class="line">    at /Users/didi/Documents/personal/xiang578.github.io/node_modules/_babel-runtime@6.26.0@babel-runtime/helpers/asyncToGenerator.js:28:13</span><br><span class="line">    at process._tickCallback (internal/process/next_tick.js:68:7)</span><br></pre></td></tr></table></figure>
<p>JSON 在解析字符串<code>&#123;&quot;title&quot;:&quot;System.out.println(&quot;hello world!&quot;);&quot;,&quot;url&quot;:&quot;/post/hello-world.html&quot;&#125;</code> 时出现错误。对应的正是之前写的一篇名为 <code>System.out.println(&quot;hello world!&quot;);</code> 的文章，由于 JSON 格式中字符串是需要用<code>&quot;&quot;</code> 修饰，导致JSON 中出现了一个  <code>&quot;title&quot;:&quot;System.out.println(&quot;hello world!&quot;);&quot;</code> key-value 组合。然而实际上 JSON 只会将 <code>&quot;System.out.println(&quot;h</code> 解析成 value，之后出现的 <code>h</code> 被当成非法字符报错。</p>
<p>定位问题之后，暂时修改文章的标题为  <a target="_blank" rel="noopener" href="https://xiang578.com/post/hello-world.html">hello world! | 算法花园</a>，绕过部署失败。</p>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted p-category" rel="tag" href="/tags/blog/">blog, </a><a class="link-muted p-category" rel="tag" href="/tags/hexo/">hexo, </a><a class="link-muted p-category" rel="tag" href="/tags/hack/">hack </a></div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2019-05-19T07:44:09.000Z" title="2019-05-19T07:44:09.000Z">2019-05-19</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2024-04-19T13:37:15.945Z" title="2024-04-19T13:37:15.945Z">2024-04-19</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E4%B8%8D%E8%80%81%E9%98%81/">不老阁</a></span><span class="level-item"><i class="far fa-clock"></i> 10 分钟读完 (大约1556个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/post/use-cos-to-store-blog.html">博客折腾记：主题更新、迁移博客到腾讯云COS以及解决百度收录</a></p><div class="content  e-content"><p>本周有空对博客进行新一轮折腾，现在将这些尝试记下来和大家分享。</p>
<h3 id="1-主题更新"><a class="markdownIt-Anchor" href="#1-主题更新"></a> 1. 主题更新</h3>
<p>我在 <a target="_blank" rel="noopener" href="http://xiang578.com/2018/05/28/use-travis-ci-to-auto-update/">博客折腾记：使用 Travis CI 自动部署</a> 中提到将主题以 modules 的形式加入主仓库。而且现在使用的主题 git 仓库是我自己 fork 的，也有一些修改。几个天之前，hexo-theme-even 的 master 接受 <a target="_blank" rel="noopener" href="https://github.com/ahonn/hexo-theme-even/pull/236">feat: add LaTeX support by JieJiSS · Pull Request #236 </a> ，完成对  LaTeX 公式的支持。所以，我需要将使用的代码和最新的代码合并。</p>
<p>这里使用的是 github Pull request 功能。在你自己 fork 的仓库的网页上点击 <code>new pull request</code>，然后按照下图修改。就会生成一个新的  Pull request 。<br />
<img src="https://media.xiang578.com/15582362469640.jpg" alt="-w1009" /></p>
<p>而且，如果你没有修改过原来的代码，PR 能自动合并。不过由于我对代码做了一些修改，会产生一些冲突，需要手动解决冲突（这里推荐使用 VS code）。出现下图的情况即成功合并两个库。<br />
<img src="https://media.xiang578.com/15582366459115.jpg" alt="-w1046" /></p>
<p>完成 PR 后，进入你站点下面的对应主题目录，使用 <code>git checkout master</code> 切换到主题的 master 分支，使用 <code>git pull origin master</code> 拉取最新的代码。回退到站点目录下，利用 <code>git add</code> 更新。</p>
<h3 id="2-迁移博客到腾讯云cos"><a class="markdownIt-Anchor" href="#2-迁移博客到腾讯云cos"></a> 2. 迁移博客到腾讯云COS</h3>
<p>利用腾讯云存储博客的静态文件，并配合使用 CDN 可以加快国内的访问速度。参考 <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000018752657?utm_source=tag-newest">Hexo博客迁移之旅（Coding到腾讯云COS）+ Travis CI持续集成 - 个人文章 - SegmentFault 思否</a> 以及 <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1185253">如何在腾讯云COS部署HEXO博客 - 云+社区 - 腾讯云</a> 。</p>
<p>记录两个我遇到的坑。</p>
<h4 id="新的域名解析"><a class="markdownIt-Anchor" href="#新的域名解析"></a> 新的域名解析</h4>
<p>完成 COS 配置后，需要将博客域名解析到腾讯提供CDN节点上的地址。</p>
<h4 id="添加持续集成自动发布到costravis-ci"><a class="markdownIt-Anchor" href="#添加持续集成自动发布到costravis-ci"></a> 添加持续集成自动发布到COS（Travis CI）</h4>
<p>为了发布到 COS，站点的 <code>_config.yml</code> 会添加下面的代码。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="attr">deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">cos</span></span><br><span class="line">  <span class="attr">secretId:</span> <span class="string">XXX_ID</span></span><br><span class="line">  <span class="attr">secretKey:</span> <span class="string">XXX_KEY</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="number">1252086360</span></span><br><span class="line">  <span class="attr">bucket:</span> <span class="string">blog-1252086360</span></span><br><span class="line">  <span class="attr">region:</span> <span class="string">ap-shanghai</span></span><br></pre></td></tr></table></figure>
<p>其中出现的 secretId 以及 secretKey 是私钥，不要在公开仓库展示。通过Travis-ci 中添加 Environment Variables 解决。</p>
<p>很多教程里，他们的 <code>_config.yml</code> 不会出现 secretId 和 secretKey 这两行，取而代之的是让你在 <code>.travis.yml</code> 添加几行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">script </span><br><span class="line">- hexo d</span><br><span class="line">env:</span><br><span class="line"> global:</span><br><span class="line">   - secretId: $&#123;secretId&#125; # Environment Variables 中配置</span><br><span class="line">   - secretKey: $&#123;secretKey&#125; # Environment Variables 中配置</span><br></pre></td></tr></table></figure>
<p>按照这样设置，build 时，出现错误提示如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123; error:</span><br><span class="line">   &#123; Code: &#x27;InvalidAccessKeyId&#x27;,</span><br><span class="line">     Message: &#x27;The access key Id format you provided is invalid.&#x27;,</span><br><span class="line">     Resource:</span><br><span class="line">      &#x27;blog-1252086360.cos.ap-shanghai.myqcloud.com/2012/01/23/2011/index.html&#x27;,</span><br><span class="line">     RequestId: &#x27;NWNlMDU3NzlfNWI5ZDA4MDlfNWVlMF81ZWUzNTg=&#x27;,</span><br><span class="line">     TraceId:</span><br><span class="line">      &#x27;OGVmYzZiMmQzYjA2OWNhODk0NTRkMTBiOWVmMDAxODc0OWRkZjk0ZDM1NmI1M2E2MTRlY2MzZDhmNmI5MWI1OTQyYWVlY2QwZTk2MDVmZDQ3MmI2Y2I4ZmI5ZmM4ODFjMDU3YThkNThjZmQ1NWVkMGY2ZDBiNGM1YTEyNGIzMGM=&#x27; &#125;,</span><br><span class="line">  statusCode: 403,</span><br><span class="line">  headers:</span><br><span class="line">   &#123; &#x27;content-type&#x27;: &#x27;application/xml&#x27;,</span><br><span class="line">     &#x27;content-length&#x27;: &#x27;513&#x27;,</span><br><span class="line">     connection: &#x27;keep-alive&#x27;,</span><br><span class="line">     date: &#x27;Sat, 18 May 2019 19:05:29 GMT&#x27;,</span><br><span class="line">     server: &#x27;tencent-cos&#x27;,</span><br><span class="line">     &#x27;x-cos-request-id&#x27;: &#x27;NWNlMDU3NzlfNWI5ZDA4MDlfNWVlMF81ZWUzNTg=&#x27;,</span><br><span class="line">     &#x27;x-cos-trace-id&#x27;:</span><br><span class="line">      &#x27;OGVmYzZiMmQzYjA2OWNhODk0NTRkMTBiOWVmMDAxODc0OWRkZjk0ZDM1NmI1M2E2MTRlY2MzZDhmNmI5MWI1OTQyYWVlY2QwZTk2MDVmZDQ3MmI2Y2I4ZmI5ZmM4ODFjMDU3YThkNThjZmQ1NWVkMGY2ZDBiNGM1YTEyNGIzMGM=&#x27; &#125; &#125;</span><br><span class="line">FATAL Something&#x27;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.html</span><br><span class="line">TypeError: Cannot read property &#x27;statusCode&#x27; of undefined</span><br><span class="line">    at uploadFileToCOS.catch.then.data (/home/travis/build/xiang578/xiang578.github.io/node_modules/hexo-deployer-cos/lib/deployer.js:42:16)</span><br><span class="line">    at process._tickCallback (internal/process/next_tick.js:68:7)</span><br></pre></td></tr></table></figure>
<p>出现这个问题是 <code>hexo -d</code> 时，_config.yml 无法获得环境变量 secretId 和 secretKey 的。会导致没有秘钥。</p>
<p>参考 <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/37014376">使用 Travis CI 部署你的 Hexo 博客 - 知乎</a> ，在 .trvis.yml 文件的 <code>hexo d</code> 命令前，加入下面两行即可解决。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- sed -i &quot;s~XXX_ID~$&#123;secretId&#125;~&quot; _config.yml</span><br><span class="line">- sed -i &quot;s~XXX_KEY~$&#123;secretKey&#125;~&quot; _config.yml</span><br></pre></td></tr></table></figure>
<p>之后build 时，会自动利用环境变量中 secretId 和 secretKey 的值替换 <code>_config.yml </code> 文件缺省的值。</p>
<p>最后提供我的两份配置文件给大家参考：<a target="_blank" rel="noopener" href="https://github.com/xiang578/xiang578.github.io/blob/hexo/_config.yml">_config.yml</a>、<a target="_blank" rel="noopener" href="https://github.com/xiang578/xiang578.github.io/blob/hexo/.travis.yml">.travis.yml</a>。</p>
<h3 id="3-百度收录"><a class="markdownIt-Anchor" href="#3-百度收录"></a> 3. 百度收录</h3>
<p>之前，我一直将博客的静态文件存储在 github 的项目中，也使用插件生成 <a target="_blank" rel="noopener" href="https://xiang578.com/baidusitemap.xml">baidusitemap</a> 文件。但是由于一些不为人知的秘密，百度的爬虫实际上无法爬取 github 上的资源，导致博客最新的文章没有被收录到百度中。</p>
<p>而且从百度提供的抓取诊断上来看，配置腾讯云 COS 后，百度的爬虫依然访问的是 github 上的仓库。</p>
<p><img src="https://media.xiang578.com/15582343082714.jpg" alt="-w558" /></p>
<p>一顿搜索之后，找到一个主动提交 hexo 博客链接至百度的插件 <a target="_blank" rel="noopener" href="https://github.com/huiwang/hexo-baidu-url-submit">huiwang/hexo-baidu-url-submit</a>。</p>
<p>参考 <a target="_blank" rel="noopener" href="https://hui-wang.info/2016/10/23/Hexo%E6%8F%92%E4%BB%B6%E4%B9%8B%E7%99%BE%E5%BA%A6%E4%B8%BB%E5%8A%A8%E6%8F%90%E4%BA%A4%E9%93%BE%E6%8E%A5/">Hexo插件之百度主动提交链接 | 王辉的博客</a> 以及 <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/f37452d4978e">Hexo百度主动提交链接 - 简书</a> 完成配置。</p>
<ul>
<li>安装插件 <code>cnpm install hexo-baidu-url-submit --save</code></li>
<li>修改根目录下面的 <code>config.yml</code> 文件，配置 baidu_url_submit 和 deploy。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">baidu_url_submit:</span><br><span class="line">  count: 100 ## 比如3，代表提交最新的三个链接</span><br><span class="line">  host: xiang578.com ## 在百度站长平台中注册的域名</span><br><span class="line">  token: your_token ## 请注意这是您的秘钥， 请不要发布在公众仓库里!</span><br><span class="line">  path: baidu_urls.txt ## 文本文档的地址， 新链接会保存在此文本文档里</span><br><span class="line"></span><br><span class="line">deploy:</span><br><span class="line">- type: cos</span><br><span class="line">  secretId: XXX_ID</span><br><span class="line">  secretKey: XXX_KEY</span><br><span class="line">  appId: 1252086360</span><br><span class="line">  bucket: blog-1252086360</span><br><span class="line">  region: ap-shanghai</span><br><span class="line">- type: baidu_url_submitter</span><br></pre></td></tr></table></figure>
<p>上面的代码中出现一个 token，由于这是一个私有的，不能出现在 github 公开的仓库中。所以也需要 Travis-ci 中添加 Environment Variables 解决。和前文提到相同，在 <code>.travis.yml</code> 中添加 <code>- sed -i &quot;s~your_token~$&#123;BD_TOKEN&#125;~&quot; _config.yml</code> 解决私钥问题。</p>
<p>最终在 travis-ci 中发现下面的日志即配置成功。另外一点，百度的站长平台的数据不能及时展示我们提交后的结果，需要耐心等待。</p>
<p><img src="https://media.xiang578.com/15582352091163.jpg" alt="-w866" /></p>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted p-category" rel="tag" href="/tags/blog/">blog, </a><a class="link-muted p-category" rel="tag" href="/tags/travis/">travis, </a><a class="link-muted p-category" rel="tag" href="/tags/cos/">cos </a></div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2018-12-20T19:39:14.000Z" title="2018-12-20T19:39:14.000Z">2018-12-21</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2024-04-19T13:37:15.941Z" title="2024-04-19T13:37:15.941Z">2024-04-19</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E4%B8%8D%E8%80%81%E9%98%81/">不老阁</a></span><span class="level-item"><i class="far fa-clock"></i> 7 分钟读完 (大约1041个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/post/fix-qiniu-test-url-error.html">博客折腾记：修复七牛云测试域名失效问题</a></p><div class="content  e-content"><p>毕业之后开始工作快要 5 个月了，然后也快有 3 个月没有更新博客。其实文本编辑器中还有很多的草稿，但是一直没有力量驱动自己完结他们，并且分享出来。另外，这一段时间也不是完全没有分享。在这个页面的上方有一个 <code>Tech</code> 的标签，可以连接到我新搭的博客。受限于当前使用的 hexo 主题无法配置 latex 数学公式，所幸新开博客分享算法学习的笔记。大家感兴趣的可以访问一下，不过也没有太多的内容。</p>
<p>这次在博客公告中要告诉大家的确是另外一件事情。屋漏偏风连夜雨，不知道从什么时候开始，七牛云开始图片使用测试域名，毫无疑问这个博客的图片都挂了。自己也一直没有动力修复，让这一段时间访问我博客的小伙伴受累了。</p>
<p>今天研究了一下如何修复这个图床问题。官方有一个帮助页面<a target="_blank" rel="noopener" href="https://developer.qiniu.com/fusion/kb/1322/how-to-configure-cname-domain-name">如何配置域名的 CNAME - 七牛开发者中心</a>，大概就是你的存储空间之前有一个测试域名（比如我的是 <a target="_blank" rel="noopener" href="http://7xkpe5.com1.z0.glb.clouddn.com">7xkpe5.com1.z0.glb.clouddn.com</a>），现在不允许通过测试域名访问图片，需要绑定一个备案过的域名才可以。所以我们需要两个步骤完成改造：首先，给空间绑定一个域名（比如现在使用的是 <a target="_blank" rel="noopener" href="http://media.xiang578.com">media.xiang578.com</a> ）；最后，在域名解析平台添加一个 CNAME，将你指定的域名转发到七牛的记录上。</p>
<p>完成上一步后，图片还是不能正常显示。因为之前的文章中，图片的链接都是以测试域名开头的，比如<code>7xkpe5.com1.z0.glb.clouddn.com/15283589946007.jpg</code> ，现在我们要将它改成 下面的形式 <code>media.xiang578.com/15283589946007.jpg</code>。简单的方法是打开文本编辑软件，然后使用查找替换功能，一个一个文件处理。显然这很无聊，而且进入 <code>source/_posts</code> 目录下利用 <code>grep 7xkpe5 *.md | wc</code> 统计了一个，我大概需要修改的有 142 处。</p>
<p><img src="https://media.xiang578.com/15453335377518.jpg" alt="需要替换的字符串" /></p>
<p>幸运地是 linux 系统下有两大文本处理利器 <code>sed</code> 和 <code>awk</code>。我们使用 <code>sed</code> 可以将一个字符串转换为另外一个字符串。网上搜索了一下用法，很快写了出来</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i -r &quot;s/7xkpe5\.com1\.z0\.glb\.clouddn\.com/media\.xiang578\.com/g&quot; *.md</span><br></pre></td></tr></table></figure>
<p>这条命令中原始形态可以表示为 <code>sed 's/原字符串/替换字符串/g'</code>。其中参数 <code>-i</code> 代表替换文件中的所有匹配项，<code>-r</code> 代表批量替换支持扩展表达式。在原字符串和替换字符串中都出现了 <code>\.</code>，应为 <code>.</code> 在 <code>sed</code> 命令中代表匹配任意单个字符，加上转移字符后可以代表它本身。最后 <code>*md</code> 代表对目录下的 <code>md</code> 文件进行处理。</p>
<p>运行完成之后，我们在统计一下测试域名和正式域名的数量，可以发现完美的解决了这个问题，图片又能正常显示。</p>
<p><img src="https://media.xiang578.com/15453344578555.jpg" alt="修改后" /></p>
<p>所以，写下今天这一篇博客一切都是因为贫穷。如果有钱直接在主机上放置图片，有带宽提供出来访问，也就不会依赖七牛云了……</p>
<hr />
<p>2019.11.09</p>
<p>为了减少博客依赖服务，参考 <a target="_blank" rel="noopener" href="https://zealot.top/%E5%9B%BE%E5%BA%8A%E4%BB%8E%E4%B8%83%E7%89%9B%E4%BA%91%E8%BF%81%E7%A7%BB%E5%88%B0%E8%85%BE%E8%AE%AFCOS.html">图床从七牛云迁移到腾讯COS折腾笔记 | 思想就是武器</a> 将所有的图片全部从七牛上下载，利用 COS 存储。</p>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted p-category" rel="tag" href="/tags/blog/">blog, </a><a class="link-muted p-category" rel="tag" href="/tags/hack/">hack </a></div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2018-09-03T23:05:50.000Z" title="2018-09-03T23:05:50.000Z">2018-09-04</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2024-04-19T13:37:15.945Z" title="2024-04-19T13:37:15.945Z">2024-04-19</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E4%B8%8D%E8%80%81%E9%98%81/">不老阁</a></span><span class="level-item"><i class="far fa-clock"></i> 11 分钟读完 (大约1668个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/post/use-travis-ci-to-auto-build-blog.html">博客折腾记：使用 Travis CI 自动部署博客</a></p><div class="content  e-content"><blockquote>
<p>已切换到 Github Action</p>
</blockquote>
<p>之前一周在封闭接受公司培训，最重要的任务是熟悉「项目开发全流程」。其中有一点：服务的稳定性。不知道为什么，前几天自己的博客崩溃了，输入域名只能看到 404 页面。当时以为是 Travis CI 的原因，所以进行了全面的一次排查：</p>
<ul>
<li>问题出现在 Github Pages 的 Custom domain 设置中。</li>
<li>具体表现：通过 Travis CI 推送博客静态文件到仓库中的 master 后，下图框中的域名就会变成空的，导致无法访问。</li>
<li>解决方法：在源文件的 source 目录下创建一个 CNAME 文件，写上你自己的域名。</li>
</ul>
<p><img src="https://media.xiang578.com/15358143289885.jpg" alt="" /></p>
<h2 id="travis-ci"><a class="markdownIt-Anchor" href="#travis-ci"></a> Travis CI</h2>
<p>其实看一眼就应该知道，我的博客是基于 hexo 搭建的，文件托管在 github 仓库中。不过，按照之前的设想博客应该在 Coding 中也有一份备份。后来由于一些原因，在利用 hexo 生成静态文件之后，自动推送到 Coding 上的命令不起作用。自己也没有时间去排查问题，所以最近访问速度有点慢。</p>
<p>传统的 hexo 博客更新过程是：在完成写作之后，利用命令行调用 <code>hexo g &amp;&amp; hexo d</code> 来生成静态博客文件以及并推送到远端的仓库中。这种方法会产生三个痛点：</p>
<ol>
<li>每一次修改源文件后都需要重新生成一边静态文件，当大量修改时，步骤就变得繁琐且无趣。</li>
<li>生成静态文件依赖电脑中的 hexo 和 node.js 环境，不方便在外出时临时写或修改博客。</li>
<li>博客源文件没有自动的备份功能，不符合安全原则。</li>
</ol>
<p>Travis CI 是一种持续集成开发所使用的工具，在写作过程中引入他可以解决上面我提到的痛点。Travis CI 具体的含义也不是很清楚，直接介绍我是怎么使用的。</p>
<p>博客依赖 3 个 git 仓库：</p>
<ul>
<li>原始文件 <a target="_blank" rel="noopener" href="https://github.com/xiang578/blog">xiang578/blog</a></li>
<li>主题文件 <a target="_blank" rel="noopener" href="https://github.com/xiang578/hexo-theme-even">xiang578/hexo-theme-even: A super concise theme for Hexo</a>（我对这个主题有一些修改，所以自己 fork 了一份</li>
<li>发布文件 <a target="_blank" rel="noopener" href="https://github.com/xiang578/xiang578.github.io">xiang578/xiang578.github.io: Welcome to My blog!</a>。</li>
</ul>
<p>和大部分人一样，这个博客的静态文件保存在 github 的 <a target="_blank" rel="noopener" href="http://xiang578.github.io">xiang578.github.io</a> 仓库 master 分支中。但是，我还创建了一个新的分支 hexo，用来保存博客源文件。每一次修改博客源文件之后，我不在本地生成静态文件，而是利用 git 命令，将所有的修改内容推送到仓库中的 hexo 分支。Travis CI 服务监听到新的 push 时，会根据你的配置将 git 仓库拉倒他的服务器上，编译源文件成为静态文件，并推送生成的文件到指定仓库的指定分支中。而且，如果编译静态文件失败，他也会通过邮件通知你结果。</p>
<p><img src="https://media.xiang578.com/15359362837525.jpg" alt="编译成功截图" /></p>
<h2 id="流程"><a class="markdownIt-Anchor" href="#流程"></a> 流程</h2>
<ol>
<li>将 github 上存放静态博客源文件的仓库拉下来，利用 <code>git checkout -b hexo</code> 创建并进入新的分支，删除分支内所有的文件。</li>
<li>将博客源文件复制到第一步中的文件夹中。</li>
<li>添加一个 <code>.travis.yml</code> 文件，文件内容可以参考下一节 Travis-ci 配置文件。</li>
<li><a target="_blank" rel="noopener" href="https://travis-ci.org/">https://travis-ci.org/</a> 提供免费的持续集成服务，可以通过 github 登入，直接选择需要管理相关的项目。</li>
<li>第一次将源文件上传到 github 时，可能会遇到问题。主题 <code>themes/xxx</code> 是通过 git clone 下载的，无法直接 push 包含嵌套关系的 git 库。<s>删除 themes/xxx/.git</s> 正确的姿势是，最开始就使用 <code>git modules</code> 引用依赖库。所幸还能编辑 <code>.git/config</code>，添加下面几行代码解决：<br />
<img src="https://media.xiang578.com/15274942502764.jpg" alt="" /></li>
<li>打开 <code>themes</code> 对应的 github 网页，你会看到主题链接到其他仓库（其中 @commitid 控制对应的版本）<br />
<img src="https://media.xiang578.com/15274943487052.jpg" alt="" /></li>
<li>完成这样的设置，修改主题文件后，需要先将修改 push 到主题的仓库，然后在博客文件夹下 push 修改到远端仓库（修改依赖的 commitid）。最终，才能再网页上看到修改效果。</li>
</ol>
<h2 id="travis-ci-配置文件"><a class="markdownIt-Anchor" href="#travis-ci-配置文件"></a> Travis-ci 配置文件</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">language: node_js</span><br><span class="line">node_js:</span><br><span class="line">- 9.11.1</span><br><span class="line">cache:</span><br><span class="line">  directories:</span><br><span class="line">  - node_modules</span><br><span class="line">before_install:</span><br><span class="line">- export TZ=&#x27;Asia/Shanghai&#x27;</span><br><span class="line">- npm install hexo-cli -g</span><br><span class="line">install:</span><br><span class="line">- npm install</span><br><span class="line">script:</span><br><span class="line">- hexo clean</span><br><span class="line">- hexo generate</span><br><span class="line">after_script:</span><br><span class="line">  -  git clone https://$&#123;GH_REF&#125; .deploy_git  # GH_REF是最下面配置的仓库地址</span><br><span class="line">  - cd .deploy_git</span><br><span class="line">  - git checkout master</span><br><span class="line">  - cd ../</span><br><span class="line">  - mv .deploy_git/.git/ ./public/ </span><br><span class="line">  - cd ./public</span><br><span class="line">  - git config user.name &quot;xiang578&quot;</span><br><span class="line">  - git config user.email &quot;xiang578@foxmail.com&quot;</span><br><span class="line">  - git add .</span><br><span class="line">  # - git commit -m &quot;Deploy at $(date +&quot;%Y-%m-%d %T&quot;)&quot;</span><br><span class="line">  - git commit -m &quot;Travis CI Auto Builder at `date +&quot;%Y-%m-%d %H:%M&quot;`&quot;</span><br><span class="line">  # Github Pages</span><br><span class="line">  - git push --force --quiet &quot;https://$&#123;CI_TOKEN&#125;@$&#123;GH_REF&#125;&quot; master:master </span><br><span class="line">  # Coding Pages</span><br><span class="line">  # - git push --force --quiet &quot;https://xiang578:$&#123;Coding_TOKEN&#125;@$&#123;CO_REF&#125;&quot; master:master</span><br><span class="line"></span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">  - hexo</span><br><span class="line"></span><br><span class="line">env:</span><br><span class="line"> global:</span><br><span class="line">   # Github Pages</span><br><span class="line">   - GH_REF: github.com/xiang578/xiang578.github.io</span><br><span class="line">   # Coding Pages</span><br><span class="line">   # - CO_REF: git.coding.net/xiang578/xiang578.git</span><br></pre></td></tr></table></figure>
<h2 id="hexo-两个错误"><a class="markdownIt-Anchor" href="#hexo-两个错误"></a> hexo 两个错误</h2>
<p>在这一次的过程中，又遇到两个本地编译 hexo 的错误，一同记录一下。错误表现如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ERROR Plugin load failed: hexo-renderer-sass</span><br><span class="line">Error: Cannot find module &#x27;node-sass&#x27;</span><br><span class="line">    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:581:15)</span><br><span class="line">   ...</span><br><span class="line">ERROR Plugin load failed: hexo-renderer-scss</span><br><span class="line">Error: Node Sass does not yet support your current environment: OS X 64-bit with Unsupported runtime (64)</span><br><span class="line">For more information on which environments are supported please see:</span><br><span class="line">https://github.com/sass/node-sass/releases/tag/v4.8.3</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
<p>网上的建议是修改 npm 的源地址为淘宝的镜像，并且重新下载这两个包。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo npm config set registry https://registry.npm.taobao.org</span><br><span class="line">npm install hexo-renderer-sass --save</span><br><span class="line">npm install hexo-renderer-scss --save</span><br></pre></td></tr></table></figure>
<h2 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> Reference</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_23079443/article/details/79015225">用TravisCI持续集成自动部署Hexo博客的个人实践 - CSDN博客</a></li>
<li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000009928515">关于 git-submodule 的一些基本操作 - 个人文章 - SegmentFault 思否</a></li>
<li><a target="_blank" rel="noopener" href="https://www.v2ex.com/t/260832">安装 npm install hexo-renderer-sass --save 出错，有什么办法没 - V2EX</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/xs20691718/article/details/81873921">hexo 发布之后 gitpage 自定义域名失效 - CSDN博客</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.zthxxx.me/posts/Build-Hexo-Blog-by-Travis-CI/">使用 Travis 自动构建 Hexo 到 GitHub | Zthxxx’s Blog</a></li>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5afe61f5f265da0b8d422a3e">使用travis-ci自动部署Hexo到github和coding - 掘金</a></li>
</ul>
<h2 id="changelog"><a class="markdownIt-Anchor" href="#changelog"></a> ChangeLog</h2>
<ul>
<li>180904：完成初稿</li>
</ul>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted p-category" rel="tag" href="/tags/blog/">blog, </a><a class="link-muted p-category" rel="tag" href="/tags/hexo/">hexo, </a><a class="link-muted p-category" rel="tag" href="/tags/github/">github, </a><a class="link-muted p-category" rel="tag" href="/tags/travisci/">travisci </a></div></div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><i class="far fa-calendar-alt"> </i><time dateTime="2018-05-28T07:44:09.000Z" title="2018-05-28T07:44:09.000Z">2018-05-28</time></span><span class="level-item is-hidden-mobile"><i class="far fa-calendar-check"> </i><time dateTime="2024-04-19T13:37:15.945Z" title="2024-04-19T13:37:15.945Z">2024-04-19</time></span><span class="level-item"><i class="far fa-folder-open has-text-grey"></i> <a class="link-muted" href="/categories/%E4%B8%8D%E8%80%81%E9%98%81/">不老阁</a></span><span class="level-item"><i class="far fa-clock"></i> 4 分钟读完 (大约556个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/post/use-travis-ci-to-auto-update.html">博客折腾记：使用 Travis CI 自动部署</a></p><div class="content  e-content"><p>前几天，看到其他人在 V2 上讨论利用 Docker 更新 hexo 博客。不过自己对使用 Docker 不是很感兴趣，倒是了解到 Travis CI 的作用。</p>
<p>参考<a target="_blank" rel="noopener" href="https://blog.zthxxx.me/posts/Build-Hexo-Blog-by-Travis-CI/">使用 Travis 自动构建 Hexo 到 GitHub | Zthxxx’s Blog</a>和<a target="_blank" rel="noopener" href="https://juejin.im/post/5afe61f5f265da0b8d422a3e">使用travis-ci自动部署Hexo到github和coding - 掘金</a>这两篇文章，完成了博客自动部署的修改，也解决了一些，之前没有在意的问题，写下来备忘一下。</p>
<p>介绍一下与这个博客先关的 git 项目。博客相关的原始文件放在 <a target="_blank" rel="noopener" href="https://github.com/xiang578/blog">xiang578/blog</a>，主题文件放在 <a target="_blank" rel="noopener" href="https://github.com/xiang578/hexo-theme-even">xiang578/hexo-theme-even: A super concise theme for Hexo</a>（我对这个主题有一些修改，所以自己 fork 了一份，最后发布的文件放在<a target="_blank" rel="noopener" href="https://github.com/xiang578/xiang578.github.io">xiang578/xiang578.github.io: Welcome to My blog!</a>（实际上这也是一个备份，访问时的文件是从 coding 服务器上读取的）。</p>
<p>按照上面两篇博文配置好 Travis CI 之后，每次向存放博客原始文件的仓库 push 时，<a target="_blank" rel="noopener" href="http://travis-ci.com">travis-ci.com</a> 都会拉取代码进行 build ，成功之后会出现下图。</p>
<p><img src="https://media.xiang578.com/15274940169141.jpg" alt="" /></p>
<p>之前都是使用 git clone 下载主题的，如果把本机上的博客相关文件直接推送到 github 上会遇到问题。简单地说就是一个 git 文件夹包含了另外一个 git 文件夹。所以，需要使用 <code>git modules</code> 来解决。通过这种方法可以在 clone 主仓库时，会自动clone子仓库。</p>
<p><img src="https://media.xiang578.com/15274942502764.jpg" alt="" /></p>
<p>博客仓库中会链接到其他仓库，其中 @ 之后的那一串就是 commit 编号，主要是用来做版本控制的。</p>
<p><img src="https://media.xiang578.com/15274943487052.jpg" alt="" /></p>
<p>完成这样的设置，修改主题文件后，需要先将修改 push 到主题的仓库，然后在博客文件夹下 push 修改到远端仓库。最终，才能再网页上看到修改效果。</p>
</div><hr style="height:1px;margin:1rem 0"><div class="level is-mobile is-flex"><div class="article-tags is-size-7 is-uppercase"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted p-category" rel="tag" href="/tags/hexo/">hexo, </a><a class="link-muted p-category" rel="tag" href="/tags/travis/">travis </a></div></div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget h-card p-author" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="u-photo avatar" src="/img/avatar-ryenxx.jpeg" alt="Runye"></figure><p class="title is-size-4 is-block p-name" rel="author" style="line-height:inherit;">Runye</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Hangzhou</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">124</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">12</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">97</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://twitter.com/xiang578" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless u-url" target="_blank" rel="noopener me" title="Twitter" href="https://twitter.com/xiang578"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless u-url" target="_blank" rel="noopener" title="Github" href="https://github.com/xiang578"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless u-url" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/problem/"><span class="level-start"><span class="level-item">problem</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/%E4%B8%8D%E8%80%81%E9%98%81/"><span class="level-start"><span class="level-item">不老阁</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E5%86%9B%E6%9C%BA%E5%A4%84/"><span class="level-start"><span class="level-item">军机处</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%96%87%E6%B8%8A%E9%98%81/"><span class="level-start"><span class="level-item">文渊阁</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%97%B6%E5%85%89%E6%9C%BA/"><span class="level-start"><span class="level-item">时光机</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E6%99%BA%E8%83%BD%E8%B7%AF/"><span class="level-start"><span class="level-item">智能路</span></span><span class="level-end"><span class="level-item tag">19</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB%E5%BF%97/"><span class="level-start"><span class="level-item">生活志</span></span><span class="level-end"><span class="level-item tag">18</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%A8%8B%E5%BA%8F%E5%9B%AD/"><span class="level-start"><span class="level-item">程序园</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%A1%8C%E6%97%85%E8%AE%B0/"><span class="level-start"><span class="level-item">行旅记</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E8%AF%BB%E4%B9%A6%E8%AE%B0/"><span class="level-start"><span class="level-item">读书记</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9A%8F%E6%83%B3%E9%9B%86/"><span class="level-start"><span class="level-item">随想集</span></span><span class="level-end"><span class="level-item tag">29</span></span></a></li><li><a class="level is-mobile" href="/categories/%E9%9A%8F%E6%89%8B%E8%AE%B0/"><span class="level-start"><span class="level-item">随手记</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li></ul></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://haihongblog.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">海虹不老阁</span></span><span class="level-right"><span class="level-item tag">haihongblog.com</span></span></a></li><li><a class="level is-mobile" href="https://www.cnblogs.com/zufezzt" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Fighting Heart</span></span><span class="level-right"><span class="level-item tag">www.cnblogs.com</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-19T13:22:44.000Z">2024-04-19</time></p><p class="title"><a href="/note/WU1iILMFdH3RZAbJKFU4WA.html">@didi food中的智能补贴实战漫谈</a></p><p class="categories"><a href="/categories/%E9%9A%8F%E6%89%8B%E8%AE%B0/">随手记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-19T13:16:06.000Z">2024-04-19</time></p><p class="title"><a href="/note/WU1iILMFdH3RZAbJKFU4WA.html">@didi food中的智能补贴实战漫谈</a></p><p class="categories"><a href="/categories/%E9%9A%8F%E6%89%8B%E8%AE%B0/">随手记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-11T16:00:00.000Z">2024-04-12</time></p><p class="title"><a href="/problem/202404121039.html">LC2923.找到冠军 I</a></p><p class="categories"><a href="/categories/problem/">problem</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-10T16:00:00.000Z">2024-04-11</time></p><p class="title"><a href="/note/202404111048.html">git pull 报错 MERGE_HEAD exists</a></p><p class="categories"><a href="/categories/%E9%9A%8F%E6%89%8B%E8%AE%B0/">随手记</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2024-04-07T16:00:00.000Z">2024-04-08</time></p><p class="title"><a href="/note/today-i-learned.html">Today I Learned</a></p><p class="categories"><a href="/categories/%E9%9A%8F%E6%89%8B%E8%AE%B0/">随手记</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/weekly/"><span class="tag">weekly</span><span class="tag">27</span></a></div><div class="control"><a class="tags has-addons" href="/tags/life/"><span class="tag">life</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/book/"><span class="tag">book</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/blog/"><span class="tag">blog</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/acm/"><span class="tag">acm</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/movie/"><span class="tag">movie</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/zufe/"><span class="tag">zufe</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/gtd/"><span class="tag">gtd</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hdu/"><span class="tag">hdu</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/algorithm/"><span class="tag">algorithm</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reinforcement-Learning/"><span class="tag">Reinforcement Learning</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/game/"><span class="tag">game</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wordpress/"><span class="tag">wordpress</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ml/"><span class="tag">ml</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/7/"><span class="tag">7</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/didiglobal/"><span class="tag">didiglobal</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/omnifocus/"><span class="tag">omnifocus</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/network/"><span class="tag">network</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LeetCode/"><span class="tag">LeetCode</span><span class="tag">2</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="算法花园" height="28"></a><p class="is-size-7"><span>&copy; 2015-2024 Ryen Xiang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><a target="_blank" rel="noopener" href="https://xn--sr8hvo.ws/%F0%9F%9B%90%E2%9A%A1%EF%B8%8F%E2%80%BC%EF%B8%8F/previous">←</a> <a target="_blank" rel="noopener" href="https://xn--sr8hvo.ws">IndieWeb Webring</a> 🕸💍<a target="_blank" rel="noopener" href="https://xn--sr8hvo.ws/%F0%9F%9B%90%E2%9A%A1%EF%B8%8F%E2%80%BC%EF%B8%8F/next">→</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent " target="_blank" rel="noopener" title="浙ICP备17004638号-1" href="https://beian.miit.gov.cn/#/Integrated/index">浙ICP备17004638号-1</a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>